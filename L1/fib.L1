(:fib
  (:fib
    0 0
    call input 0
    rax >>= 1
    cjump rax < 2 :fib_end
    
    r8 <- 0
    r9 <- 0
    r10 <- 1
    rsi <- 2

    cjump rsi = rax :fib_loop_next
    :fib_loop
    r8 <- r9
    r9 <- r10
    rcx <- r9
    rcx += r8
    r10 <- rcx
    rsi += 1
    cjump rsi <= rax :fib_loop
    
    :fib_loop_next
    rdi <- r10
    rdi <<= 1
    rdi += 1
    call print 1
    return

    :fib_end
    rdi <- rax
    rdi	<<= 1
    rdi	+= 1
    call print 1
    return
  )
)